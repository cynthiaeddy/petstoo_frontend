import React from 'react';
import { Loader, Segment } from 'semantic-ui-react';
import UserPets from '../components/users/UserPets';

class UserContainer extends React.Component {
	render() {
		console.log(this.props, 'props', this.props.currentUser);

		const { currentUser } = this.props;
		// console.log('this.props.currentUser.pets', this.props.currentUser.pets);

		toggleAdopt = (petId) => {
			// fetch(`http://localhost:3000/api/v1/pets/${petId}/toggle_adopt`, {
			// 	method: 'PATCH'
			// })
			// 	.then((res) => res.json())
			// 	.then(console.log);
			// => {
			// let target = this.props.currentUser.pets.find((pet) => pet.id === response.id);
			// let copy = [ ...this.props.currentUser.pets ];
			// let index = copy.indexOf(target);
			// copy[index] = response;
			// this.props.updateUser({ ...this.props.currentUser, pets: copy });
		};
		// };

		if (currentUser) {
			return (
				<div>
					<Segment>
						hi {currentUser.name}! <br />
						<p>please refresh to update pets</p>
					</Segment>
					<Segment>
						<UserPets pets={currentUser.pets} currentUser={currentUser} />
					</Segment>
				</div>
			);
		} else {
			return <Loader />;
		}
	}
}

export default UserContainer;
